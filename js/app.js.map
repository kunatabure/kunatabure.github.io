{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?c650","webpack:///./src/App.vue?68d3","webpack:///./src/components/TeiReader.vue?852e","webpack:///./src/components/TextReader.vue?eee7","webpack:///./src/components/TextNode.vue?bda3","webpack:///./src/components/TextNode.vue","webpack:///./src/components/TextNode.vue?0179","webpack:///./src/components/TextNode.vue?cf73","webpack:///./src/util/get.ts","webpack:///./src/components/TextReader.vue","webpack:///./src/components/TextReader.vue?d595","webpack:///./src/components/TextReader.vue?d3a1","webpack:///./src/components/MetadataReader.vue?cbfb","webpack:///./src/components/MetadataField.vue?071c","webpack:///./src/components/MetadataField.vue","webpack:///./src/components/MetadataField.vue?1d8a","webpack:///./src/components/MetadataField.vue?8461","webpack:///./src/components/MetadataReader.vue","webpack:///./src/components/MetadataReader.vue?6b27","webpack:///./src/components/MetadataReader.vue?d550","webpack:///./src/components/NestedListReader.vue?c351","webpack:///./src/components/NestedListReader.vue","webpack:///./src/components/NestedListReader.vue?9711","webpack:///./src/components/NestedListReader.vue?b449","webpack:///./src/components/TeiReader.vue","webpack:///./src/components/TeiReader.vue?4a5d","webpack:///./src/components/TeiReader.vue?7e96","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/util/XPathEvaluator.ts","webpack:///./src/util/TEIMetadataParser.ts","webpack:///./src/util/TEITextParser.ts","webpack:///./src/util/deepclone.ts","webpack:///./src/store/index.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","class","$store","state","ui","attrs","staticRenderFns","staticClass","smallMenuOpen","isSmall","isSmallMenuOpen","on","toggleSmallMenu","_v","_e","hasMultipleSections","_l","selectedSection","domProps","_s","label","$event","selectSection","closeLabel","closeCallback","close","type","headings","heading","idx","target","activeHeading","navigateTo","sections","section","directives","rawName","expression","text","textClick","hideFootnote","footnote","hasSidebarAnnotations","ref","annotationId","annotation","hideAnnotation","_b","node","toggleReference","nodeAttrs","child","marks","markAttrs","map","mark","forEach","entries","typeDef","isReference","$props","reference","attr","display","commit","path","substring","schema","component","obj","pathElements","split","Number","parseInt","docUpdated","element","document","querySelector","container","$el","scrollTop","offsetTop","ev","scroll","teiReaderSrc","localStorage","getItem","teiReader","JSON","parse","identifier","setItem","stringify","Array","querySelectorAll","filter","getAttribute","article","clientHeight","nextHeading","localName","parentElement","nextTick","content","getText","join","navigation","generateHeadings","textElements","nodeSchema","toLowerCase","tmpElements","generateHTML","concat","sectionData","doc","annotations","annotationDoc","footnoteDoc","components","TextNode","group","entry","idx2","config","parent","MetadataField","referencePath","source","nodeName","nested","docs","lines","id","keys","callbacks","TextReader","MetadataReader","NestedListReader","configElement","getElementById","innerHTML","autoLoad","sourceData","dispatch","updateWindowSize","addEventListener","removeEventListener","innerWidth","TeiReader","nsResolver","prefix","dom","xpath","resultType","evaluate","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","ORDERED_NODE_ITERATOR_TYPE","STRING_TYPE","stringValue","BOOLEAN_TYPE","booleanValue","NUMBER_TYPE","numberValue","header","firstNode","documentElement","temp","parseHeaderNode","tag","elements","nodeIterator","iterateNext","_attrs","_text","children","attributes","indexOf","multiple","nestedDocs","parser","selector","tmp","parseContentNode","nestedDoc","addNestedDoc","parsers","e","console","log","parseContentAttributes","parseContentMarks","idx3","nestedParent","deepclone","undefined","isArray","val","clone","use","Store","mutations","init","set","TEIReader","setTextDoc","payload","setMetadata","metadata","toggleAnnotation","toggleFootnote","setMode","setDocIdentifier","actions","load","newDoc","domParser","DOMParser","parseFromString","nestedKey","docKey","debounce","productionTip","store","render","h","$mount"],"mappings":"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","file":"js/app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:'mode-' + this.$store.state.ui.mode,attrs:{\"id\":\"app\"}},[_c('TeiReader')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tei-reader\"},[_c('div',{class:this.$store.state.ui.smallMenuOpen ? 'small-menu-open' : null},[(_vm.isSmall && _vm.isSmallMenuOpen)?_c('nav',{staticClass:\"main\"},[_c('ul',[_c('li',[_c('a',{on:{\"click\":_vm.toggleSmallMenu}},[_vm._v(\"☰\")])])])]):_vm._e(),((!_vm.isSmall && _vm.hasMultipleSections) || (_vm.isSmall && _vm.isSmallMenuOpen))?_c('nav',{staticClass:\"main\"},[_c('ul',{attrs:{\"role\":\"menubar\"}},[_vm._l((_vm.sections),function(value,key){return _c('li',{key:key,attrs:{\"role\":\"presentation\"}},[_c('a',{attrs:{\"role\":\"menuitem\",\"aria-checked\":key === _vm.selectedSection ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(value.label)},on:{\"click\":function($event){return _vm.selectSection(key)}}})])}),(_vm.closeLabel && _vm.closeCallback)?_c('li',{attrs:{\"role\":\"presentation\"}},[_c('a',{attrs:{\"role\":\"menuitem\"},domProps:{\"innerHTML\":_vm._s(_vm.closeLabel)},on:{\"click\":_vm.close}})]):_vm._e()],2)]):_vm._e()]),_vm._l((_vm.sections),function(value,key){return [(key === _vm.selectedSection && value.type === 'Text')?_c('text-reader',{key:key,attrs:{\"section\":key}}):(key === _vm.selectedSection && value.type === 'Metadata')?_c('metadata-reader',{key:key,attrs:{\"section\":key}}):(key === _vm.selectedSection && value.type === 'NestedList')?_c('nested-list-reader',{key:key,attrs:{\"section\":key}}):_vm._e()]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"text-reader\"},[(_vm.isSmall && (!_vm.isSmallMenuOpen || _vm.headings.length > 0))?_c('div',{class:_vm.isSmallMenuOpen ? 'small-menu-open' : null},[_c('nav',{staticClass:\"main\"},[_c('ul',[_c('li',[_c('a',{on:{\"click\":_vm.toggleSmallMenu}},[_vm._v(\"☰\")])])])]),(_vm.headings.length > 0)?_c('nav',{staticClass:\"main vertical\"},[_c('ul',[_vm._l((_vm.headings),function(heading,idx){return [(heading.target === _vm.activeHeading || (!_vm.activeHeading && idx === 0) || _vm.isSmallMenuOpen)?_c('li',{key:idx},[_c('a',{attrs:{\"aria-checked\":heading.target === _vm.activeHeading ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(heading.label)},on:{\"click\":function($event){_vm.isSmallMenuOpen ? _vm.navigateTo(heading) : _vm.toggleSmallMenu()}}})]):_vm._e()]})],2)]):_c('nav',{staticClass:\"main\"},[_c('ul',[_c('li',[_c('a',{on:{\"click\":_vm.toggleSmallMenu}},[_vm._v(_vm._s(_vm.$store.state.sections[_vm.section].label))])])])])]):_vm._e(),(!_vm.isSmall && _vm.headings.length > 0)?_c('nav',{staticClass:\"headings vertical\"},[_c('ul',_vm._l((_vm.headings),function(heading,idx){return _c('li',{key:idx},[_c('a',{attrs:{\"aria-checked\":heading.target === _vm.activeHeading ? 'true' : 'false'},domProps:{\"innerHTML\":_vm._s(heading.label)},on:{\"click\":function($event){return _vm.navigateTo(heading)}}})])}),0)]):_vm._e(),_c('article',[_c('div',{directives:[{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.scrollReader),expression:\"scrollReader\"}],domProps:{\"innerHTML\":_vm._s(_vm.text)},on:{\"click\":_vm.textClick}}),(_vm.footnote)?_c('aside',[_c('a',{on:{\"click\":function($event){return _vm.hideFootnote(_vm.footnote[0])}}},[_vm._v(\"✖\")]),_c('text-node',{attrs:{\"section\":_vm.section,\"node\":_vm.footnote[1]}})],1):_vm._e()]),(!_vm.isSmall && _vm.hasSidebarAnnotations)?_c('aside',_vm._l((_vm.annotations),function(ref,idx){\nvar annotationId = ref[0];\nvar annotation = ref[1];\nreturn _c('section',{key:idx},[_c('a',{on:{\"click\":function($event){return _vm.hideAnnotation(annotationId)}}},[_vm._v(\"✖\")]),(annotation)?_c('text-node',{attrs:{\"section\":_vm.section,\"node\":annotation}}):_vm._e()],1)}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isReference)?_c('a',_vm._b({class:'node-' + _vm.node.type,on:{\"click\":_vm.toggleReference}},'a',_vm.nodeAttrs,false),[(_vm.node.text)?_c('span',[_vm._v(_vm._s(_vm.node.text))]):_vm._e(),_vm._l((_vm.node.content),function(child,idx){return [(child.type === 'text' && _vm.marks(child).length > 0)?_c('span',_vm._b({key:idx,class:_vm.marks(child)},'span',_vm.markAttrs(child),false),[_vm._v(_vm._s(child.text))]):(child.type === 'text')?[_vm._v(_vm._s(child.text))]:_c('text-node',{key:idx,attrs:{\"section\":_vm.section,\"node\":child}})]})],2):(_vm.isInline)?_c('span',_vm._b({class:'node-' + _vm.node.type},'span',_vm.nodeAttrs,false),[(_vm.node.text)?_c('span',[_vm._v(_vm._s(_vm.node.text))]):_vm._e(),_vm._l((_vm.node.content),function(child,idx){return [(child.type === 'text' && _vm.marks(child).length > 0)?_c('span',_vm._b({key:idx,class:_vm.marks(child)},'span',_vm.markAttrs(child),false),[_vm._v(_vm._s(child.text))]):(child.type === 'text')?[_vm._v(_vm._s(child.text))]:_c('text-node',{key:idx,attrs:{\"section\":_vm.section,\"node\":child}})]})],2):_c('div',_vm._b({class:'node-' + _vm.node.type},'div',_vm.nodeAttrs,false),[_vm._l((_vm.node.content),function(child,idx){return [(child.type === 'text' && _vm.marks(child).length > 0)?_c('span',_vm._b({key:idx,class:_vm.marks(child)},'span',_vm.markAttrs(child),false),[_vm._v(_vm._s(child.text))]):(child.type === 'text')?[_vm._v(_vm._s(child.text))]:_c('text-node',{key:idx,attrs:{\"section\":_vm.section,\"node\":child}})]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { StringKeyValueDict, SerialisedNode } from '@/interfaces';\n\n@Component({\n    name: 'text-node',\n})\nexport default class TextNode extends Vue {\n    @Prop() section!: string;\n    @Prop() node!: SerialisedNode;\n\n    public get isSmall() {\n        return this.$store.state.ui.mode === 'small';\n    }\n\n    public get typeDef() {\n        const schema = this.$store.state.sections[this.$props.section].schema;\n        for(let idx = 0; idx < schema.length; idx++) {\n            if (schema[idx].name === this.$props.node.type) {\n                return schema[idx];\n            }\n        }\n        return null;\n    }\n\n    public get nodeAttrs() {\n        const attrs = {} as StringKeyValueDict;\n        if (this.$props.node.attrs) {\n            Object.entries(this.$props.node.attrs).forEach(([key, value]) => {\n                if (value) {\n                    attrs['data-' + key] = value as string;\n                }\n            });\n        }\n        return attrs;\n    }\n\n    public get isReference() {\n        const type = this.typeDef;\n        if (type && type.reference) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    public get isInline() {\n        const type = this.typeDef;\n        if (type && type.type === 'inline') {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    public marks(node: SerialisedNode) {\n        if (node.marks) {\n            return node.marks.map((mark) => { return 'mark-' + mark.type; });\n        }\n        return [];\n    }\n\n    public markAttrs(node: SerialisedNode) {\n        if (node.marks) {\n            const attrs = {} as StringKeyValueDict;\n            node.marks.forEach((mark) => {\n                if (mark.attrs) {\n                    Object.entries(mark.attrs).forEach(([key, value]) => {\n                        if (value) {\n                            attrs['data-' + key] = value as string;\n                        }\n                    });\n                }\n            });\n            return attrs;\n        }\n        return {};\n    }\n\n    public toggleReference() {\n        const type = this.typeDef;\n        if (type && this.isReference && this.$props.node.attrs[type.reference.attr]) {\n            if (!this.isSmall && type.reference.display === 'sidebar') {\n                this.$store.commit('toggleAnnotation', {\n                    path: this.$props.section + '.nested.' + type.reference.type + '.' + this.$props.node.attrs[type.reference.attr].substring(1),\n                });\n            } else {\n                this.$store.commit('toggleFootnote', {\n                    path: this.$props.section + '.nested.' + type.reference.type + '.' + this.$props.node.attrs[type.reference.attr].substring(1),\n                });\n            }\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextNode.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextNode.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TextNode.vue?vue&type=template&id=d1c17f70&\"\nimport script from \"./TextNode.vue?vue&type=script&lang=ts&\"\nexport * from \"./TextNode.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// eslint-disable-next-line\nexport default function get(obj: any, path: string) {\n    let pathElements = path.split('.');\n    while (obj && pathElements.length > 0) {\n        if (pathElements[0][0] === '[' && pathElements[0][pathElements[0].length - 1] === ']') {\n            const idx = Number.parseInt(pathElements[0].substring(1, pathElements[0].length - 1));\n            if (idx >= 0 && idx < obj.length) {\n                obj = obj[idx];\n            }\n        } else {\n            obj = obj[pathElements[0]];\n        }\n        pathElements = pathElements.slice(1);\n    }\n    return obj;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport TextNode from './TextNode.vue';\nimport get from '@/util/get';\nimport { StringKeyValueDict, NumberKeyValueDict, SerialisedNode, AnyKeyValueDict } from '@/interfaces';\n// eslint-disable-next-line\n// @ts-ignore\nimport { tween } from 'femtotween';\n\n@Component({\n    components: {\n        TextNode,\n    },\n})\nexport default class TextReader extends Vue {\n    @Prop() section!: string;\n\n    activeHeading: string | null = '';\n\n    // ===================\n    // Computed properties\n    // ===================\n    public get isSmall() {\n        return this.$store.state.ui.mode === 'small';\n    }\n\n    public get isSmallMenuOpen() {\n        return this.$store.state.ui.smallMenuOpen;\n    }\n\n    public get doc() {\n        const sectionData = this.$store.state.content[this.$props.section];\n        if (sectionData && sectionData.doc) {\n            return sectionData.doc;\n        } else {\n            return null;\n        }\n    }\n\n    public get hasSidebarAnnotations(): boolean {\n        const schema = this.$store.state.sections[this.$props.section].schema;\n        for (let idx = 0; idx < schema.length; idx++) {\n            if (schema[idx].reference && schema[idx].reference.display === 'sidebar') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public get annotations() {\n        return this.$store.state.ui.sections[this.$props.section].annotations.map((annotation: string) => {\n            const annotationDoc = get(this.$store.state.content, annotation);\n            if (annotationDoc) {\n                return [annotation, annotationDoc.content[0]];\n            } else {\n                return null;\n            }\n        });\n    }\n\n    public get footnote() {\n        const footnote = this.$store.state.ui.sections[this.$props.section].footnote;\n        if (footnote) {\n            const footnoteDoc = get(this.$store.state.content, footnote);\n            if (footnoteDoc) {\n                return [footnote, footnoteDoc.content[0]];\n            }\n        }\n        return null;\n    }\n\n    public get headings() {\n        if (this.doc) {\n            const schema = this.$store.state.sections[this.$props.section].schema;\n            const headings = [] as StringKeyValueDict[];\n            this.generateHeadings(this.doc, schema, headings)\n            return headings;\n        }\n        return [];\n    }\n\n    public get schema() {\n        return this.$store.state.sections[this.$props.section].schema;\n    }\n\n    public get text() {\n        return this.generateHTML(this.doc, this.schema).join('');\n    }\n\n    // ==================\n    // Lifecycle handlers\n    // ==================\n\n    public mounted() {\n        this.docUpdated();\n    }\n\n    // ==============\n    // Event handlers\n    // ==============\n\n    public hideAnnotation(annotation: string) {\n        this.$store.commit('toggleAnnotation', { path: annotation });\n    }\n\n    public hideFootnote(annotation: string) {\n        this.$store.commit('toggleFootnote', { path: annotation });\n    }\n\n    public navigateTo(heading: StringKeyValueDict) {\n        const element = document.querySelector('[data-' + heading.attr + '=\"' + heading.target + '\"]') as HTMLElement;\n        if (element) {\n            const container = this.$el.querySelector('article > div') as HTMLElement;\n            if (container) {\n                tween(container.scrollTop, element.offsetTop, (value: number) => { container.scrollTop = value; });\n            }\n        }\n        if (this.isSmallMenuOpen) {\n            this.toggleSmallMenu();\n        }\n    }\n\n    public toggleSmallMenu() {\n        this.$store.commit('toggleSmallMenu');\n    }\n\n    public scrollReader(ev: UIEvent, scroll: NumberKeyValueDict) {\n        if (this && this.$el) {\n            // Store scroll\n            const teiReaderSrc = window.localStorage.getItem('tei-reader');\n            let teiReader = {} as AnyKeyValueDict;\n            if (teiReaderSrc) {\n                teiReader = JSON.parse(teiReaderSrc);\n            }\n            if (!teiReader[this.$store.state.ui.identifier]) {\n                teiReader[this.$store.state.ui.identifier] = {};\n            }\n            if (!teiReader[this.$store.state.ui.identifier][this.$props.section]) {\n                teiReader[this.$store.state.ui.identifier][this.$props.section] = 0;\n            }\n            teiReader[this.$store.state.ui.identifier][this.$props.section] = scroll.scrollTop;\n            window.localStorage.setItem('tei-reader', JSON.stringify(teiReader));\n            // Update Headings\n            const headings = Array.prototype.slice.call(this.$el.querySelectorAll('[data-navigation-attr]')).filter((heading: HTMLElement) => {\n                return heading.getAttribute('data-' + heading.getAttribute('data-navigation-attr'));\n            });\n            if (headings.length > 0) {\n                this.activeHeading = null;\n                if (scroll.scrollTop > 0) {\n                    const article = this.$el.querySelector('article');\n                    if (article) {\n                        scroll.scrollTop = scroll.scrollTop + article.clientHeight * 0.25;\n                    }\n                }\n                for (let idx = 0; idx < headings.length; idx++) {\n                    const heading = headings[idx] as HTMLElement;\n                    if (idx < headings.length - 1) {\n                        const nextHeading = headings[idx + 1] as HTMLElement;\n                        if (scroll.scrollTop >= heading.offsetTop && scroll.scrollTop < nextHeading.offsetTop) {\n                            this.activeHeading = heading.getAttribute('data-' + heading.getAttribute('data-navigation-attr'));\n                        }\n                    } else {\n                        if (scroll.scrollTop >= heading.offsetTop) {\n                            this.activeHeading = heading.getAttribute('data-' + heading.getAttribute('data-navigation-attr'));\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    public textClick(ev: MouseEvent) {\n        let target = ev.target as HTMLElement;\n        while (target) {\n            if (target.localName === 'a') {\n                break;\n            }\n            target = target.parentElement as HTMLElement;\n        }\n        if (target && target.getAttribute('data-reference-path')) {\n            if (target.getAttribute('data-reference-mode') === 'sidebar') {\n                if (this.$store.state.ui.mode === 'small') {\n                    this.$store.commit('toggleFootnote', { path: target.getAttribute('data-reference-path') });\n                } else {\n                    this.$store.commit('toggleAnnotation', { path: target.getAttribute('data-reference-path') });\n                }\n            } else if (target.getAttribute('data-reference-mode') === 'footnote') {\n                this.$store.commit('toggleFootnote', { path: target.getAttribute('data-reference-path') });\n            }\n        }\n    }\n\n    // =======\n    // Watches\n    // =======\n\n    @Watch('doc')\n    public docUpdated() {\n        const container = this.$el.querySelector('article > div') as HTMLElement;\n        container.scrollTop = 0;\n        if (window.localStorage && this.$store.state.ui.identifier && this.$props.section) {\n            const teiReaderSrc = window.localStorage.getItem('tei-reader');\n            let teiReader = {} as AnyKeyValueDict;\n            if (teiReaderSrc) {\n                teiReader = JSON.parse(teiReaderSrc);\n            }\n            if (!teiReader[this.$store.state.ui.identifier]) {\n                teiReader[this.$store.state.ui.identifier] = {};\n            }\n            if (!teiReader[this.$store.state.ui.identifier][this.$props.section]) {\n                teiReader[this.$store.state.ui.identifier][this.$props.section] = 0;\n            }\n            const container = this.$el.querySelector('article > div') as HTMLElement;\n            Vue.nextTick(() => {\n                container.scrollTop = teiReader[this.$store.state.ui.identifier][this.$props.section];\n            });\n            window.localStorage.setItem('tei-reader', JSON.stringify(teiReader));\n        }\n    }\n\n    // ===============\n    // Private methods\n    // ===============\n\n    private nodeSchema(name: string, schema: any) {\n        for (let idx = 0; idx < schema.length; idx++) {\n            if (schema[idx].name === name) {\n                return schema[idx];\n            }\n        }\n        return null;\n    }\n\n    private getText(node: SerialisedNode): string {\n        if (node.type === 'text' && node.text) {\n            return node.text;\n        } else {\n            if (node.content) {\n                return node.content.map((child) => { return this.getText(child); }).join('');\n            } else {\n                return '';\n            }\n        }\n    }\n\n    private generateHeadings(node: SerialisedNode, schema: any, headings: StringKeyValueDict[]) {\n        if (node) {\n            for (let idx = 0; idx < schema.length; idx++) {\n                if (schema[idx].name === node.type && schema[idx].navigation && node.attrs && node.attrs[schema[idx].navigation.attr]) {\n                    headings.push({\n                        attr: schema[idx].navigation.attr,\n                        target: node.attrs[schema[idx].navigation.attr] as string,\n                        label: this.getText(node),\n                    });\n                }\n            }\n            if (node.content) {\n                for (let idx = 0; idx < node.content.length; idx++) {\n                    this.generateHeadings(node.content[idx], schema, headings)\n                }\n            }\n        }\n    }\n\n    private generateHTML(node: SerialisedNode, schema: any) {\n        let textElements = [] as string[];\n        if (node) {\n            const nodeSchema = this.nodeSchema(node.type, schema);\n            if (nodeSchema) {\n                if (nodeSchema.name === 'text') {\n                    if (node.marks) {\n                        textElements.push('<span class=\"');\n                        node.marks.forEach((mark, idx) => {\n                            if (idx > 0) {\n                                textElements.push(' mark-' + mark.type);\n                            } else {\n                                textElements.push('mark-' + mark.type);\n                            }\n                        });\n                        textElements.push('\"');\n                        node.marks.forEach((mark) => {\n                            if (mark.attrs) {\n                                Object.entries(mark.attrs).forEach(([key, value]) => {\n                                    textElements.push(' data-' + key + '=\"' + value + '\"');\n                                });\n                            }\n                        });\n                        textElements.push('>');\n                    }\n                } else if (nodeSchema.reference) {\n                    textElements.push('<a class=\"node-' + node.type + '\"');\n                    if (node.attrs) {\n                        Object.entries(node.attrs).forEach(([key, value]) => {\n                            textElements.push(' data-' + key + '=\"' + value + '\"');\n                        });\n                    }\n                    if (node.attrs && nodeSchema.reference && nodeSchema.reference.attr && node.attrs[nodeSchema.reference.attr]) {\n                        textElements.push(' data-reference-path=\"' + this.$props.section + '.nested.' + nodeSchema.reference.type + '.' + node.attrs[nodeSchema.reference.attr] + '\"');\n                        textElements.push(' data-reference-mode=\"' + nodeSchema.reference.display + '\"');\n                    }\n                    textElements.push('>');\n                } else if (nodeSchema.type === 'inline') {\n                    textElements.push('<span class=\"node-' + node.type + '\"');\n                    if (node.attrs) {\n                        Object.entries(node.attrs).forEach(([key, value]) => {\n                            textElements.push(' data-' + key + '=\"' + value + '\"');\n                        });\n                    }\n                    textElements.push('>');\n                } else {\n                    textElements.push('<div class=\"node-' + node.type + '\"');\n                    if (node.attrs) {\n                        Object.entries(node.attrs).forEach(([key, value]) => {\n                            textElements.push(' data-' + key + '=\"' + value + '\"');\n                        });\n                    }\n                    if (nodeSchema.navigation) {\n                        textElements.push(' data-navigation-attr=\"' + nodeSchema.navigation.attr.toLowerCase() + '\"');\n                    }\n                    textElements.push('>');\n                }\n                if (node.text) {\n                    textElements.push(node.text);\n                }\n                if (node.content) {\n                    for (let idx = 0; idx < node.content.length; idx++) {\n                        const tmpElements = this.generateHTML(node.content[idx], schema);\n                        textElements = textElements.concat(tmpElements);\n                    }\n                }\n                if (nodeSchema.name === 'text') {\n                    if (node.marks) {\n                        textElements.push('</span>');\n                    }\n                } else if (nodeSchema.reference) {\n                    textElements.push('</a>');\n                } else if (nodeSchema.type === 'inline') {\n                    textElements.push('</span>');\n                } else {\n                    textElements.push('</div>');\n                }\n            } else if (node.type === 'doc') {\n                if (node.content) {\n                    for (let idx = 0; idx < node.content.length; idx++) {\n                        const tmpElements = this.generateHTML(node.content[idx], schema);\n                        textElements = textElements.concat(tmpElements);\n                    }\n                }\n            }\n        }\n        return textElements;\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextReader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextReader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TextReader.vue?vue&type=template&id=d8fd9d60&\"\nimport script from \"./TextReader.vue?vue&type=script&lang=ts&\"\nexport * from \"./TextReader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"metadata-reader\"},[(_vm.isSmall && !_vm.isSmallMenuOpen)?_c('div',{class:_vm.isSmallMenuOpen ? 'small-menu-open' : null},[_c('nav',[_c('ul',[_c('li',[_c('a',{on:{\"click\":_vm.toggleSmallMenu}},[_vm._v(\"☰\")])])])]),_c('nav',{staticClass:\"vertical\"},[_c('ul',[_c('li',[_c('a',{on:{\"click\":_vm.toggleSmallMenu}},[_vm._v(_vm._s(_vm.$store.state.sections[_vm.section].label))])])])])]):_vm._e(),_vm._l((_vm.metadataGroups),function(group,idx){return _c('section',{key:idx},[_c('h2',[_vm._v(_vm._s(group.label))]),_vm._l((group.entries),function(entry,idx2){return _c('metadata-field',{key:idx2,attrs:{\"section\":_vm.section,\"config\":entry,\"parent\":''}})})],2)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.config.type == 'single-text')?[_c('span',{staticClass:\"field\"},[_c('span',{staticClass:\"label\"},[_vm._v(_vm._s(_vm.config.label))]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.value))])])]:_vm._e(),(_vm.config.type == 'multi-row')?[_c('ol',{staticClass:\"multi-row\"},_vm._l((_vm.value),function(data,idx){return _c('li',{key:idx},_vm._l((_vm.config.entries),function(entry,idx2){return _c('metadata-field',{key:idx2,attrs:{\"section\":_vm.section,\"config\":entry,\"parent\":_vm.parent + _vm.config.path + '.[' + idx + ']'}})}),1)}),0)]:_vm._e(),(_vm.config.type == 'multi-field')?[_c('ol',{staticClass:\"multi-field\"},_vm._l((_vm.config.entries),function(entry,idx){return _c('li',{key:idx},[_c('metadata-field',{attrs:{\"section\":_vm.section,\"config\":entry,\"parent\":_vm.parent + _vm.config.path}})],1)}),0)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport get from '@/util/get';\nimport { ConfigMetadataNodeSchema } from '@/interfaces';\n\n@Component({\n    name: 'metadata-field',\n})\nexport default class MetadataField extends Vue {\n    @Prop() config!: ConfigMetadataNodeSchema;\n    @Prop() section!: string;\n    @Prop() parent!: string;\n\n    public get value() {\n        const value = get(this.$store.state.content[this.$props.section], this.$props.parent + this.$props.config.path);\n        if (value) {\n            return value;\n        } else {\n            return '';\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetadataField.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetadataField.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MetadataField.vue?vue&type=template&id=05127f29&\"\nimport script from \"./MetadataField.vue?vue&type=script&lang=ts&\"\nexport * from \"./MetadataField.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport MetadataField from './MetadataField.vue';\n\n@Component({\n    components: {\n        MetadataField,\n    },\n})\nexport default class MetadataReader extends Vue {\n    @Prop() section!: string;\n\n    // ===================\n    // Computed properties\n    // ===================\n    public get isSmall() {\n        return this.$store.state.ui.mode === 'small';\n    }\n\n    public get isSmallMenuOpen() {\n        return this.$store.state.ui.smallMenuOpen;\n    }\n\n    public get metadataGroups() {\n        return this.$store.state.sections[this.$props.section].ui;\n    }\n\n    // ==============\n    // Event handlers\n    // ==============\n\n    public toggleSmallMenu() {\n        this.$store.commit('toggleSmallMenu');\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetadataReader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetadataReader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MetadataReader.vue?vue&type=template&id=63c695fe&\"\nimport script from \"./MetadataReader.vue?vue&type=script&lang=ts&\"\nexport * from \"./MetadataReader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"nested-list-reader\"},[(_vm.isSmall && !_vm.isSmallMenuOpen)?_c('div',{class:_vm.isSmallMenuOpen ? 'small-menu-open' : null},[_c('nav',{staticClass:\"main\"},[_c('ul',[_c('li',[_c('a',{on:{\"click\":_vm.toggleSmallMenu}},[_vm._v(\"☰\")])])])]),_c('nav',{staticClass:\"main vertical\"},[_c('ul',[_c('li',[_c('a',{on:{\"click\":_vm.toggleSmallMenu}},[_vm._v(_vm._s(_vm.$store.state.sections[_vm.section].label))])])])])]):_vm._e(),_c('article',[_c('div',{directives:[{name:\"scroll\",rawName:\"v-scroll\",value:(_vm.scrollReader),expression:\"scrollReader\"}],domProps:{\"innerHTML\":_vm._s(_vm.text)},on:{\"click\":_vm.textClick}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport TextNode from './TextNode.vue';\nimport { NumberKeyValueDict, SerialisedNode, AnyKeyValueDict } from '@/interfaces';\n// eslint-disable-next-line\n// @ts-ignore\nimport { tween } from 'femtotween';\n\n@Component({\n    components: {\n        TextNode,\n    },\n})\nexport default class NestedListReader extends Vue {\n    @Prop() section!: string;\n\n    activeHeading: string | null = '';\n\n    // ===================\n    // Computed properties\n    // ===================\n    public get isSmall() {\n        return this.$store.state.ui.mode === 'small';\n    }\n\n    public get isSmallMenuOpen() {\n        return this.$store.state.ui.smallMenuOpen;\n    }\n\n    public get sectionData() {\n        return this.$store.state.sections[this.$props.section];\n    }\n\n    public get docs(): {[x: string]: SerialisedNode} | null {\n        const sectionData = this.$store.state.content[this.sectionData.source];\n        if (sectionData && sectionData.nested && sectionData.nested[this.sectionData.nodeName]) {\n            return sectionData.nested[this.sectionData.nodeName];\n        } else {\n            return null;\n        }\n    }\n\n    public get schema() {\n        return this.$store.state.sections[this.sectionData.source].schema;\n    }\n\n    public get text() {\n        if (this.docs) {\n            let lines = ['<ol>'];\n            Object.entries(this.docs).forEach(([id, node]) => {\n                if (node.content && node.content.length > 0) {\n                    lines.push('<li id=\"' + id + '\">');\n                    lines = lines.concat(this.generateHTML(node.content[0], this.schema));\n                    lines.push('</li>');\n                }\n            });\n            lines.push('</ol>');\n            return lines.join('');\n        } else {\n            return null;\n        }\n    }\n\n    // ==================\n    // Lifecycle handlers\n    // ==================\n\n    public mounted() {\n        this.docUpdated();\n    }\n\n    // ==============\n    // Event handlers\n    // ==============\n\n    public toggleSmallMenu() {\n        this.$store.commit('toggleSmallMenu');\n    }\n\n    public scrollReader(ev: UIEvent, scroll: NumberKeyValueDict) {\n        if (this && this.$el) {\n            const teiReaderSrc = window.localStorage.getItem('tei-reader');\n            let teiReader = {} as AnyKeyValueDict;\n            if (teiReaderSrc) {\n                teiReader = JSON.parse(teiReaderSrc);\n            }\n            if (!teiReader[this.$store.state.ui.identifier]) {\n                teiReader[this.$store.state.ui.identifier] = {};\n            }\n            if (!teiReader[this.$store.state.ui.identifier][this.$props.section]) {\n                teiReader[this.$store.state.ui.identifier][this.$props.section] = 0;\n            }\n            teiReader[this.$store.state.ui.identifier][this.$props.section] = scroll.scrollTop;\n            window.localStorage.setItem('tei-reader', JSON.stringify(teiReader));\n        }\n    }\n\n    public textClick(ev: MouseEvent) {\n        let target = ev.target as HTMLElement;\n        while (target) {\n            if (target.localName === 'a') {\n                break;\n            }\n            target = target.parentElement as HTMLElement;\n        }\n        const referencePath = target.getAttribute('data-reference-path');\n        if (target && referencePath) {\n            const path = referencePath.split('.');\n            if (path.length > 0 && path[0] === this.sectionData.source && path[2] == this.sectionData.nodeName) {\n                const container = this.$el.querySelector('article > div') as HTMLElement;\n                const element = this.$el.querySelector('#' + path[3]) as HTMLElement;\n                if (container && element) {\n                    tween(container.scrollTop, element.offsetTop, (value: number) => { container.scrollTop = value; });\n                }\n            }\n        }\n    }\n\n    // =======\n    // Watches\n    // =======\n\n    @Watch('doc')\n    public docUpdated() {\n        const container = this.$el.querySelector('article > div') as HTMLElement;\n        container.scrollTop = 0;\n        if (window.localStorage && this.$store.state.ui.identifier && this.$props.section) {\n            const teiReaderSrc = window.localStorage.getItem('tei-reader');\n            let teiReader = {} as AnyKeyValueDict;\n            if (teiReaderSrc) {\n                teiReader = JSON.parse(teiReaderSrc);\n            }\n            if (!teiReader[this.$store.state.ui.identifier]) {\n                teiReader[this.$store.state.ui.identifier] = {};\n            }\n            if (!teiReader[this.$store.state.ui.identifier][this.$props.section]) {\n                teiReader[this.$store.state.ui.identifier][this.$props.section] = 0;\n            }\n            const container = this.$el.querySelector('article > div') as HTMLElement;\n            Vue.nextTick(() => {\n                container.scrollTop = teiReader[this.$store.state.ui.identifier][this.$props.section];\n            });\n            window.localStorage.setItem('tei-reader', JSON.stringify(teiReader));\n        }\n    }\n\n    // ===============\n    // Private methods\n    // ===============\n\n    private nodeSchema(name: string, schema: any) {\n        for (let idx = 0; idx < schema.length; idx++) {\n            if (schema[idx].name === name) {\n                return schema[idx];\n            }\n        }\n        return null;\n    }\n\n    private getText(node: SerialisedNode): string {\n        if (node.type === 'text' && node.text) {\n            return node.text;\n        } else {\n            if (node.content) {\n                return node.content.map((child) => { return this.getText(child); }).join('');\n            } else {\n                return '';\n            }\n        }\n    }\n\n    private generateHTML(node: SerialisedNode, schema: any) {\n        let textElements = [] as string[];\n        if (node) {\n            const nodeSchema = this.nodeSchema(node.type, schema);\n            if (nodeSchema) {\n                if (nodeSchema.name === 'text') {\n                    if (node.marks) {\n                        textElements.push('<span class=\"');\n                        node.marks.forEach((mark, idx) => {\n                            if (idx > 0) {\n                                textElements.push(' mark-' + mark.type);\n                            } else {\n                                textElements.push('mark-' + mark.type);\n                            }\n                        });\n                        textElements.push('\"');\n                        node.marks.forEach((mark) => {\n                            if (mark.attrs) {\n                                Object.entries(mark.attrs).forEach(([key, value]) => {\n                                    textElements.push(' data-' + key + '=\"' + value + '\"');\n                                });\n                            }\n                        });\n                        textElements.push('>');\n                    }\n                } else if (nodeSchema.reference) {\n                    textElements.push('<a class=\"node-' + node.type + '\"');\n                    if (node.attrs) {\n                        Object.entries(node.attrs).forEach(([key, value]) => {\n                            textElements.push(' data-' + key + '=\"' + value + '\"');\n                        });\n                    }\n                    if (node.attrs && nodeSchema.reference && nodeSchema.reference.attr && node.attrs[nodeSchema.reference.attr]) {\n                        textElements.push(' data-reference-path=\"' + this.$props.section + '.nested.' + nodeSchema.reference.type + '.' + (node.attrs[nodeSchema.reference.attr] as string).substring(1) + '\"');\n                        textElements.push(' data-reference-mode=\"' + nodeSchema.reference.display + '\"');\n                    }\n                    textElements.push('>');\n                } else if (nodeSchema.type === 'inline') {\n                    textElements.push('<span class=\"node-' + node.type + '\"');\n                    if (node.attrs) {\n                        Object.entries(node.attrs).forEach(([key, value]) => {\n                            textElements.push(' data-' + key + '=\"' + value + '\"');\n                        });\n                    }\n                    textElements.push('>');\n                } else {\n                    textElements.push('<div class=\"node-' + node.type + '\"');\n                    if (node.attrs) {\n                        Object.entries(node.attrs).forEach(([key, value]) => {\n                            textElements.push(' data-' + key + '=\"' + value + '\"');\n                        });\n                    }\n                    textElements.push('>');\n                }\n                if (node.text) {\n                    textElements.push(node.text);\n                }\n                if (node.content) {\n                    for (let idx = 0; idx < node.content.length; idx++) {\n                        const tmpElements = this.generateHTML(node.content[idx], schema);\n                        textElements = textElements.concat(tmpElements);\n                    }\n                }\n                if (nodeSchema.name === 'text') {\n                    if (node.marks) {\n                        textElements.push('</span>');\n                    }\n                } else if (nodeSchema.reference) {\n                    textElements.push('</a>');\n                } else if (nodeSchema.type === 'inline') {\n                    textElements.push('</span>');\n                } else {\n                    textElements.push('</div>');\n                }\n            } else if (node.type === 'doc') {\n                if (node.content) {\n                    for (let idx = 0; idx < node.content.length; idx++) {\n                        const tmpElements = this.generateHTML(node.content[idx], schema);\n                        textElements = textElements.concat(tmpElements);\n                    }\n                }\n            }\n        }\n        return textElements;\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NestedListReader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NestedListReader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NestedListReader.vue?vue&type=template&id=2d634df4&\"\nimport script from \"./NestedListReader.vue?vue&type=script&lang=ts&\"\nexport * from \"./NestedListReader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport TextReader from './TextReader.vue';\nimport MetadataReader from './MetadataReader.vue';\nimport NestedListReader from './NestedListReader.vue';\n\n@Component({\n    components: {\n        TextReader,\n        MetadataReader,\n        NestedListReader,\n    },\n})\nexport default class TeiReader extends Vue {\n    public get isSmall() {\n        return this.$store.state.ui.mode === 'small';\n    }\n\n    public get isSmallMenuOpen() {\n        return this.$store.state.ui.smallMenuOpen;\n    }\n\n    public get hasMultipleSections() {\n        return Object.keys(this.$store.state.sections).length > 1;\n    }\n\n    public get sections() {\n        return this.$store.state.sections;\n    }\n\n    public get selectedSection() {\n        return this.$store.state.ui.selectedSection;\n    }\n\n\n    public get closeLabel() {\n        return this.$store.state.ui.closeLabel;\n    }\n\n    public get closeCallback() {\n        return this.$store.state.callbacks.close;\n    }\n\n    public selectSection(key: string) {\n        this.$store.commit('selectSection', key);\n        if (this.isSmall) {\n            this.$store.commit('toggleSmallMenu');\n        }\n    }\n\n    public toggleSmallMenu() {\n        this.$store.commit('toggleSmallMenu');\n    }\n\n    public close() {\n        if (this.isSmall) {\n            this.$store.commit('toggleSmallMenu');\n        }\n        this.closeCallback();\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeiReader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeiReader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TeiReader.vue?vue&type=template&id=bdcf7bf6&\"\nimport script from \"./TeiReader.vue?vue&type=script&lang=ts&\"\nexport * from \"./TeiReader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport TeiReader from './components/TeiReader.vue';\n\n@Component({\n  components: {\n    TeiReader,\n  },\n})\nexport default class App extends Vue {\n    public mounted() {\n        const configElement = document.getElementById('TEIReaderConfig');\n        if (configElement) {\n            const config = JSON.parse(configElement.innerHTML);\n            if (config) {\n                this.$store.commit('init', config);\n            }\n        }\n        if (this.$store.state.callbacks && this.$store.state.callbacks.autoLoad) {\n            this.$store.state.callbacks.autoLoad((sourceData: string) => {\n                this.$store.dispatch('load', sourceData);\n            });\n        }\n        this.updateWindowSize();\n        window.addEventListener('resize', this.updateWindowSize);\n    }\n\n    public beforeDestroy() {\n        window.removeEventListener('resize', this.updateWindowSize);\n    }\n\n    public updateWindowSize() {\n        if (window.innerWidth < 1024) {\n            this.$store.commit('setMode', 'small');\n        } else {\n            this.$store.commit('setMode', 'large');\n        }\n    }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=f747fe56&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","function nsResolver(prefix: string | null) {\n    if (prefix === 'tei') {\n        return 'http://www.tei-c.org/ns/1.0';\n    } else if (prefix === 'xml') {\n        return 'http://www.w3.org/XML/1998/namespace';\n    } else {\n        return 'http://www.tei-c.org/ns/1.0';\n    }\n}\n\nexport default class XPathEvaluator {\n    private dom: XMLDocument;\n\n    constructor (dom: XMLDocument) {\n        this.dom = dom;\n    }\n\n    evaluate(node: Node, xpath: string, resultType: number) {\n        return this.dom.evaluate(xpath, node, nsResolver, resultType, null);\n    }\n\n    firstNode(node: Node, xpath: string) {\n        return this.evaluate(node, xpath, XPathResult.FIRST_ORDERED_NODE_TYPE).singleNodeValue;\n    }\n\n    nodeIterator(node: Node, xpath: string) {\n        return this.evaluate(node, xpath, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\n    }\n\n    stringValue(node: Node, xpath: string) {\n        return this.evaluate(node, xpath, XPathResult.STRING_TYPE).stringValue;\n    }\n\n    booleanValue(node: Node, xpath: string) {\n        return this.evaluate(node, xpath, XPathResult.BOOLEAN_TYPE).booleanValue;\n    }\n\n    numberValue(node: Node, xpath: string) {\n        return this.evaluate(node, xpath, XPathResult.NUMBER_TYPE).numberValue;\n    }\n}\n","import XPathEvaluator from './XPathEvaluator';\nimport get from './get';\n\nexport default class TEIMetadataParser {\n    private dom: XMLDocument;\n    private xpath: XPathEvaluator;\n    private config: any;\n    private data: any;\n\n    constructor(dom: XMLDocument, config: any) {\n        this.dom = dom;\n        this.xpath = new XPathEvaluator(this.dom);\n        this.config = config;\n    }\n\n    public get() {\n        if (!this.data) {\n            const header = this.xpath.firstNode(this.dom.documentElement, '/tei:TEI/tei:teiHeader') as Element;\n            this.data = {};\n            for (let idx = 0; idx < this.config.schema.length; idx++) {\n                const temp = this.parseHeaderNode(header, this.config.schema[idx]);\n                if (temp) {\n                    this.data[this.config.schema[idx].tag.substring(4)] = temp;\n                }\n            }\n        }\n        return this.data;\n    }\n\n    private parseHeaderNode(node: Element, schema: any) {\n        const elements = this.xpath.nodeIterator(node, schema.tag);\n        const result = [] as any;\n        let element = elements.iterateNext() as Element;\n        while (element) {\n            const obj = {\n                _attrs: {},\n                _text: element.children.length === 0 ? this.xpath.stringValue(element, 'text()') : null\n            } as any;\n            for(let idx = 0; idx < element.attributes.length; idx++) {\n                obj._attrs[element.attributes[idx].name] = element.attributes[idx].value;\n            }\n            if (schema.children) {\n                for (let idx = 0; idx < schema.children.length; idx++) {\n                    const temp = this.parseHeaderNode(element, schema.children[idx]);\n                    if (temp) {\n                        obj[schema.children[idx].tag.substring(schema.children[idx].tag.indexOf(':') + 1)] = temp;\n                    }\n                }\n            }\n            result.push(obj);\n            element = elements.iterateNext() as Element;\n        }\n        if (result.length === 0) {\n            return null;\n        } else {\n            if (schema.multiple) {\n                return result;\n            } else {\n                return result[0];\n            }\n        }\n    }\n}\n","import XPathEvaluator from './XPathEvaluator';\nimport { SerialisedNode, NestedDocSet, SerialisedAttrs, ParseAttributesSchema, ParseParserSchema, TEITextParserConfig,\n    ParseNodeSchema, SerialisedNodeMark } from '@/interfaces';\n\nexport default class TEITextParser {\n    private dom: XMLDocument;\n    private xpath: XPathEvaluator;\n    private config: TEITextParserConfig;\n    private doc: SerialisedNode | null = null;\n    private nestedDocs: NestedDocSet = {} as NestedDocSet;\n\n    constructor(dom: XMLDocument, config: TEITextParserConfig) {\n        this.dom = dom;\n        this.xpath = new XPathEvaluator(this.dom);\n        this.config = config;\n    }\n\n    public get(): [SerialisedNode, NestedDocSet] {\n        if (!this.doc) {\n            this.doc = {\n                type: 'doc',\n                content: [],\n            };\n            this.nestedDocs = {};\n            if (this.config.parser && this.config.parser.selector) {\n                const node = this.xpath.firstNode(this.dom.documentElement, this.config.parser.selector) as Element;\n                if (node) {\n                    for(let idx = 0; idx < node.children.length; idx++) {\n                        const tmp = this.parseContentNode(node.children[idx], this.config);\n                        if (tmp && !tmp.nestedDoc && this.doc.content) {\n                            this.doc.content.push(tmp);\n                        } else if (tmp && tmp.nestedDoc) {\n                            this.addNestedDoc(tmp);\n                        }\n                    }\n                }\n            }\n        }\n        return [this.doc, this.nestedDocs];\n    }\n\n    private parseContentAttributes(node: Element, attrs: ParseAttributesSchema) {\n        // Parse attributes for nodes or marks. Attributes can have a type which is boolean, number, static, or string (default).\n        const result = {} as SerialisedAttrs;\n        Object.entries(attrs).forEach(([key, schema]) => {\n            let parsers = [] as ParseParserSchema[];\n            if (schema.parser) {\n                parsers.push(schema.parser);\n            } else if (schema.parsers) {\n                parsers = schema.parsers;\n            }\n            for (let idx = 0; idx < parsers.length; idx++) {\n                const parser = parsers[idx];\n                if (parser.type === 'boolean') {\n                    result[key] = this.xpath.booleanValue(node, parser.selector);\n                } else if (parser.type === 'number') {\n                    try {\n                        result[key] = this.xpath.numberValue(node, parser.selector);\n                    } catch(e) {\n                        // eslint-disable-next-line\n                        console.log(e);\n                    }\n                } else if (parser.type === 'static') {\n                    if (this.xpath.booleanValue(node, parser.selector)) {\n                        result[key] = parser.value;\n                    }\n                } else {\n                    try {\n                        const value = this.xpath.stringValue(node, parser.selector);\n                        if (value) {\n                            result[key] = value;\n                        }\n                    } catch(e) {\n                        // eslint-disable-next-line\n                        console.log(e);\n                    }\n                }\n            }\n        });\n        return result;\n    }\n\n    private parseContentMarks(node: Element, schema: ParseNodeSchema[]) {\n        // Parse the marks of a text node\n        const result = [] as SerialisedNodeMark[];\n        schema.forEach((entry: ParseNodeSchema) => {\n            if (entry.type === 'mark') {\n                let parsers = [] as ParseParserSchema[];\n                if (entry.parser) {\n                    parsers.push(entry.parser);\n                } else if (entry.parsers) {\n                    parsers = entry.parsers;\n                }\n                for (let idx = 0; idx < parsers.length; idx++) {\n                    if (this.xpath.booleanValue(node, parsers[idx].selector)) {\n                        const mark = {\n                            type: entry.name\n                        } as SerialisedNodeMark;\n                        if (entry.attrs) {\n                            mark.attrs = this.parseContentAttributes(node, entry.attrs);\n                        }\n                        result.push(mark);\n                    }\n                }\n            }\n        });\n        return result;\n    }\n\n    private parseContentNode(node: Element, section: TEITextParserConfig) {\n        // Parse a single content node\n        const entries = Object.entries(section.schema);\n        for (let idx = 0; idx < entries.length; idx++) {\n            //let key = entries[idx][0];\n            const nodeSchema = entries[idx][1] as ParseNodeSchema;\n            let parsers = [] as ParseParserSchema[];\n            if (nodeSchema.parser) {\n                parsers.push(nodeSchema.parser);\n            } else if (nodeSchema.parsers) {\n                parsers = parsers.concat(nodeSchema.parsers);\n            }\n            for (let idx2 = 0; idx2 < parsers.length; idx2++) {\n                const parser = parsers[idx2];\n                if (this.xpath.firstNode(node, 'self::' + parser.selector) !== null) {\n                    // The first schema node where the parser selector matches is chosen as the result\n                    const result = {\n                        type: nodeSchema.name\n                    } as SerialisedNode;\n                    if (nodeSchema.attrs) {\n                        result.attrs = this.parseContentAttributes(node, nodeSchema.attrs);\n                    }\n                    if (nodeSchema.type === 'nested') {\n                        result.nestedDoc = true;\n                    }\n                    if (nodeSchema.type === 'inline') {\n                        // Inline nodes are either loaded as text nodes with marks or as complex text nodes\n                        if (nodeSchema.name === 'text') {\n                            if (parser.text) {\n                                result.text = this.xpath.stringValue(node, parser.text);\n                            }\n                            result.marks = this.parseContentMarks(node, section.schema);\n                            if (node.children.length === 1) {\n                                const temp = this.parseContentNode(node.children[0], section);\n                                if (temp && temp.text && temp.text !== '') {\n                                    result.text = temp.text;\n                                }\n                                if (temp && temp.marks) {\n                                    result.marks = result.marks.concat(temp.marks);\n                                }\n                            }\n                        } else {\n                            if (node.children.length === 0) {\n                                // Inline nodes without children need a virtual text node added if they have text\n                                if (parser.text && this.xpath.stringValue(node, parser.text)) {\n                                    result.content = [\n                                        {\n                                            type: 'text',\n                                            text: this.xpath.stringValue(node, parser.text),\n                                            marks: this.parseContentMarks(node, section.schema)\n                                        }\n                                    ];\n                                }\n                            } else {\n                                const content = [];\n                                for (let idx3 = 0; idx3 < node.children.length; idx3++) {\n                                    const child = this.parseContentNode(node.children[idx3], section);\n                                    if (child) {\n                                        content.push(child);\n                                    }\n                                }\n                                result.content = content;\n                            }\n                        }\n                    } else {\n                        const content = [];\n                        for (let idx3 = 0; idx3 < node.children.length; idx3++) {\n                            const child = this.parseContentNode(node.children[idx3], section);\n                            if (child && !child.nestedDoc) {\n                                content.push(child);\n                            } else if (child && child.nestedDoc) {\n                                this.addNestedDoc(child);\n                            }\n                        }\n                        result.content = content;\n                    }\n                    return result;\n                }\n            }\n        }\n        return null;\n    }\n\n    private addNestedDoc(nestedParent: SerialisedNode) {\n        if (nestedParent.attrs && nestedParent.attrs.id) {\n            if (!this.nestedDocs[nestedParent.type]) {\n                this.nestedDocs[nestedParent.type] = {};\n            }\n            this.nestedDocs[nestedParent.type][nestedParent.attrs.id] = nestedParent;\n            const nestedDoc = {\n                type: 'doc',\n                content: nestedParent.content,\n            }\n            nestedParent.content = [nestedDoc];\n        }\n    }\n}\n","/**\n * Performs a deep cloning of the first element of the parameters.\n */\nexport default function deepclone(obj: any): any {\n    if (obj === undefined) {\n        return undefined;\n    } else if (obj === null) {\n        return null;\n    } else if (Array.isArray(obj)) {\n        return obj.map((val) => {\n            return deepclone(val);\n        });\n    } else if (typeof(obj) === 'object') {\n        const clone = {} as any;\n        Object.keys(obj).forEach(function(key) {\n            clone[key] = deepclone(obj[key]);\n        });\n        return clone;\n    } else {\n        return obj;\n    }\n}\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport TEIMetadataParser from '@/util/TEIMetadataParser';\nimport TEITextParser from '@/util/TEITextParser';\nimport deepclone from '@/util/deepclone';\nimport { State, Config, MutationSetTextDoc, MutationToggleAnnotation, MutationSetMetadata, LoadActionParameters } from '@/interfaces';\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n    state: {\n        content: {\n        },\n        callbacks: {\n        },\n        sections: {\n        },\n        ui: {\n            mode: 'small',\n            smallMenuOpen: false,\n            selectedSection: null,\n            sections: {},\n            closeLabel: null,\n            identifier: '',\n        }\n    } as State,\n    mutations: {\n        init(state, config: Config) {\n            state.sections = config.sections;\n            Object.keys(config.sections).forEach((key, idx) => {\n                Vue.set(state.content, key, {});\n                if (config.sections[key].type === 'Text') {\n                    Vue.set(state.content[key], 'doc', null);\n                    Vue.set(state.content[key], 'nested', {});\n                }\n\n                Vue.set(state.ui.sections, key, {});\n                if (config.sections[key].type === 'Text') {\n                    Vue.set(state.ui.sections[key], 'annotations', []);\n                    Vue.set(state.ui.sections[key], 'footnote', null);\n                }\n\n                if (idx === 0) {\n                    state.ui.selectedSection = key;\n                }\n            });\n            // eslint-disable-next-line\n            // @ts-ignore\n            if (window.TEIReader && window.TEIReader.callbacks) {\n                // eslint-disable-next-line\n                // @ts-ignore\n                Vue.set(state.callbacks, 'autoLoad', window.TEIReader.callbacks.autoLoad);\n                // eslint-disable-next-line\n                // @ts-ignore\n                Vue.set(state.callbacks, 'close', window.TEIReader.callbacks.close);\n            }\n            if (config.ui && config.ui.closeLabel) {\n                state.ui.closeLabel = config.ui.closeLabel;\n            }\n        },\n\n        setTextDoc(state, payload: MutationSetTextDoc) {\n            const path = payload.path.split('.');\n            if (path.length === 2) {\n                Vue.set(state.content[path[0]], path[1], payload.doc);\n            } else if(path.length === 4) {\n                Vue.set(state.content[path[0]].nested[path[2]][path[3]], 'content', [payload.doc]);\n            }\n        },\n\n        addNestedDoc(state, payload: MutationSetTextDoc) {\n            const path = payload.path.split('.');\n            if (path.length === 4) {\n                if (!state.content[path[0]].nested[path[2]]) {\n                    Vue.set(state.content[path[0]].nested, path[2], {});\n                }\n                Vue.set(state.content[path[0]].nested[path[2]], path[3], {\n                    attrs: {\n                        id: path[3],\n                    },\n                    content: [\n                        payload.doc,\n                    ],\n                    nestedDoc: true,\n                    type: path[2],\n                });\n            }\n        },\n\n        setMetadata(state, payload: MutationSetMetadata) {\n            Vue.set(state.content, payload.path, payload.metadata);\n        },\n\n        selectSection(state, section: string) {\n            state.ui.selectedSection = section;\n        },\n\n        toggleAnnotation(state, payload: MutationToggleAnnotation) {\n            const path = payload.path.split('.');\n            if (path.length === 4) {\n                const annotations = deepclone(state.ui.sections[path[0]].annotations);\n                if (annotations.indexOf(payload.path) >= 0) {\n                    annotations.splice(annotations.indexOf(payload.path), 1);\n                } else {\n                    annotations.push(payload.path);\n                }\n                Vue.set(state.ui.sections[path[0]], 'annotations', annotations);\n            }\n        },\n\n        toggleFootnote(state, payload: MutationToggleAnnotation) {\n            const path = payload.path.split('.');\n            if (path.length === 4) {\n                if (state.ui.sections[path[0]].footnote === payload.path) {\n                    Vue.set(state.ui.sections[path[0]], 'footnote', null);\n                } else {\n                    Vue.set(state.ui.sections[path[0]], 'footnote', payload.path);\n                }\n            }\n        },\n\n        toggleSmallMenu(state) {\n            state.ui.smallMenuOpen = !state.ui.smallMenuOpen;\n        },\n\n        setMode(state, payload: string) {\n            state.ui.mode = payload;\n        },\n\n        setDocIdentifier(state, payload: string) {\n            state.ui.identifier = payload;\n        },\n    },\n    actions: {\n        load({ commit, state }, newDoc: LoadActionParameters) {\n            commit('setDocIdentifier', newDoc.identifier);\n            const domParser = new DOMParser();\n            const dom = domParser.parseFromString(newDoc.content, 'application/xml');\n            Vue.set(state, 'content', {});\n            Object.keys(state.sections).forEach((key) => {\n                Vue.set(state.content, key, {});\n                Vue.set(state.content[key], 'doc', null);\n                Vue.set(state.content[key], 'nested', {});\n            });\n            Object.entries(state.sections).forEach(([key, config]) => {\n                if (config.type === 'Metadata') {\n                    commit('setMetadata', { path: key, metadata: (new TEIMetadataParser(dom, config)).get() });\n                } else if (config.type === 'Text') {\n                    const [doc, nestedDocs] = (new TEITextParser(dom, config)).get();\n                    commit('setTextDoc', { path: key + '.doc', doc: doc });\n                    Object.entries(nestedDocs).forEach(([nestedKey, docs]) => {\n                        Object.entries(docs).forEach(([docKey, doc]) => {\n                            if (doc.content) {\n                                commit('addNestedDoc', {path: key + '.nested.' + nestedKey + '.' + docKey, doc: doc.content[0]});\n                            }\n                        });\n                    });\n                }\n            });\n        }\n    },\n    modules: {\n    }\n})\n","import Vue from 'vue';\nimport App from './App.vue';\nimport store from './store';\n// eslint-disable-next-line\n// @ts-ignore\nimport vuescroll from 'vue-scroll';\n\nVue.use(vuescroll, { debounce: 50 });\n\nVue.config.productionTip = false\n\nnew Vue({\n  store,\n  render: h => h(App)\n}).$mount('#app')\n"],"sourceRoot":""}